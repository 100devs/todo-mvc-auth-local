<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('partials/head') %>

</head>

<!-- Header / Navbar -->
<header class="navbar-space">
  <%- include('partials/header') %>
</header>

<body class="">
  <!-- Cut>Format>Paste the ul to format with prettier -->
  <!-- TODO: look into EJS formatting -->

  <!-- button to add a company -->
  <div class="container">
    <div class="row">
      <div class="col-12">
        <a href="companies/add" class="btn btn-primary">Add Company</a>
      </div>
    </div>

    <!-- Bootstrap Tabs -->
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="accordion-tab" data-bs-toggle="tab" data-bs-target="#accordion-tab-pane"
          type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">Accordion View</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="card-tab" data-bs-toggle="tab" data-bs-target="#card-tab-pane" type="button"
          role="tab" aria-controls="card-tab-pane" aria-selected="false">Card View</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="table-tab" data-bs-toggle="tab" data-bs-target="#table-tab-pane" type="button"
          role="tab" aria-controls="table-tab-pane" aria-selected="false">Table View</button>
      </li>
    </ul>
    <!-- Content for the Tabs -->
    <div class="tab-content" id="myTabContent">
      <div class="tab-pane fade show active" id="accordion-tab-pane" role="tabpanel" aria-labelledby="accordion-tab"
        tabindex="0">
        <!-- Accordion View Content Goes Here -->


        <div class="accordion">
          <% companies.forEach(company => { %>
          <div class="accordion-item">
            <h2 class="accordion-header" id="<%= company.companyName %>head">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#<%= company.companyName %>" aria-expanded="false"
                aria-controls="<%= company.companyName %>">
                <div data-id='<%=company._id%>'>
                  <h5 class="card-title">Company Name: <%= company.companyName %></h5>
                  <h6 class="card-subtitle mb-2 text-muted">Point of Contact Name: <%= company.pointOfContact.name %>
                  </h6>
                  <p class="card-text">Point of Contact Email: <%= company.pointOfContact.email %></p>
                </div>
              </button>
            </h2>
            <a href="/companies/edit/<%= company._id %>" class="card-link">Edit</a>
            <button class='del-company btn btn-danger'>Delete</button>
            <div id="<%= company.companyName %>" class="accordion-collapse collapse" aria-labelledby="headingOne">
              <div class="accordion-body">
                Company Info Here


                <table>
                  
                </table>
                <!-- companyName: {
                  type: String,
                  required: true,
                },
                dateAdded: {
                  type: Date,
                  default: Date.now,
                },
                url: String,
                role: String,
                roleURL: String,
                position: String,
                source: String,
                pointOfContact: {
                  name: String,
                  position: String,
                  email: String,
                },
                application: {
                  // The Boolean type accepts 'yes' and 'no' values and casts them to true and false
                  applied: Boolean,
                  applyDate: Date,
                  coffeeChat: Boolean,
                  coffeeChatDate: Date,
                  saidThanks: Boolean,
                  interviewDate: Date,
                  followUp: Date,
                },
                comments: String,
                userId: {
                  type: mongoose.Schema.Types.ObjectId,
                  ref: 'User',
                }, -->


              </div>
            </div>
          </div>
          <% }) %>

        </div>


      </div>
      <div class="tab-pane fade" id="card-tab-pane" role="tabpanel" aria-labelledby="card-tab" tabindex="0">
        <!-- Card View Content Goes Here -->


        <!-- list of companies in card format -->
        <div class="row">
          <div class="col-12">
            <ul class="list-group">
              <% companies.forEach(company => { %>
              <li class="list-group-item">
                <div class="card">
                  <div class="card-body" data-id='<%=company._id%>'>
                    <h5 class="card-title">Company Name: <%= company.companyName %></h5>
                    <h6 class="card-subtitle mb-2 text-muted">Point of Contact Name: <%= company.pointOfContact.name %>
                    </h6>
                    <p class="card-text">Point of Contact Email: <%= company.pointOfContact.email %></p>
                    <a href="#<%= company._id %>" class="card-link" data-toggle="collapse">View</a>
                    <div id="#<%= company._id %>" class="collapse">
                      Howdy
                    </div>
                    <a href="/companies/edit/<%= company._id %>" class="card-link">Edit</a>
                    <button class='del-company btn btn-danger'>Delete</button>
                  </div>
                </div>
              </li>
              <% }) %>
            </ul>
          </div>
        </div>

      </div>
      <div class="tab-pane fade" id="table-tab-pane" role="tabpanel" aria-labelledby="table-tab" tabindex="0">
        <!-- Table View Content Goes Here -->

        <!-- empty so far -->

      </div>
    </div>

    <hr>
    <!-- LogOut Button -->
    <a href="/logout" class="btn btn-lg btn-danger btn-block m-2 d-flex justify-content-center w-25 mx-auto"
      role="button">Logout</a>

    <script src="js/main.js"></script>
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
      crossorigin="anonymous"></script>
    <script src="js/companies.js"></script>
</body>

</html>